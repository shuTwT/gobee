<div class="p-4 sm:p-6 lg:p-8">
    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-6">相册管理</h2>

    <div class="flex flex-col md:flex-row gap-6">
        <!-- 左侧相册列表 -->
        <div class="w-full md:w-1/3 bg-white dark:bg-gray-800 shadow-md rounded-lg p-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">相册列表</h3>
                <button id="addAlbumBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">
                    <i class="fas fa-plus mr-2"></i>新增相册
                </button>
            </div>
            <ul id="albumList" class="space-y-2">
                <!-- 示例相册 -->
                <li class="flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 album-item" data-album-id="1">
                    <span class="text-gray-800 dark:text-gray-200">我的照片</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">50 张</span>
                </li>
                <li class="flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 album-item" data-album-id="2">
                    <span class="text-gray-800 dark:text-gray-200">旅行回忆</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">120 张</span>
                </li>
            </ul>
        </div>

        <!-- 右侧照片列表 -->
        <div class="w-full md:w-2/3 bg-white dark:bg-gray-800 shadow-md rounded-lg p-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">照片列表</h3>
                <button id="uploadPhotoBtn" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">
                    <i class="fas fa-upload mr-2"></i>上传照片
                </button>
            </div>
            <div id="photoList" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
                <!-- 示例照片卡片 -->
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm overflow-hidden">
                    <img src="https://via.placeholder.com/150" alt="Photo 1" class="w-full h-32 object-cover">
                    <div class="p-3">
                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200 truncate">照片 1.jpg</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">2023-01-01</p>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm overflow-hidden">
                    <img src="https://via.placeholder.com/150" alt="Photo 2" class="w-full h-32 object-cover">
                    <div class="p-3">
                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200 truncate">照片 2.png</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">2023-01-02</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 新增相册模态框 -->
    <div id="addAlbumModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <h3 class="text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4">新增相册</h3>
            <div class="mt-2">
                <input type="text" id="newAlbumName" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="相册名称">
            </div>
            <div class="items-center px-4 py-3 mt-4">
                <button id="saveAlbumBtn" class="px-4 py-2 bg-blue-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">
                    保存
                </button>
                <button id="cancelAlbumBtn" class="mt-3 px-4 py-2 bg-gray-300 text-gray-800 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 dark:bg-gray-600 dark:text-white">
                    取消
                </button>
            </div>
        </div>
    </div>

    <!-- 上传照片模态框 -->
    <div id="uploadPhotoModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <h3 class="text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4">上传照片</h3>
            <div class="mt-2">
                <input type="file" id="photoFile" accept="image/*" class="mt-1 block w-full text-gray-900 dark:text-white">
            </div>
            <div class="items-center px-4 py-3 mt-4">
                <button id="confirmUploadBtn" class="px-4 py-2 bg-green-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">
                    上传
                </button>
                <button id="cancelUploadBtn" class="mt-3 px-4 py-2 bg-gray-300 text-gray-800 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 dark:bg-gray-600 dark:text-white">
                    取消
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const addAlbumBtn = document.getElementById('addAlbumBtn');
        const addAlbumModal = document.getElementById('addAlbumModal');
        const saveAlbumBtn = document.getElementById('saveAlbumBtn');
        const cancelAlbumBtn = document.getElementById('cancelAlbumBtn');
        const newAlbumNameInput = document.getElementById('newAlbumName');
        const albumList = document.getElementById('albumList');

        const uploadPhotoBtn = document.getElementById('uploadPhotoBtn');
        const uploadPhotoModal = document.getElementById('uploadPhotoModal');
        const confirmUploadBtn = document.getElementById('confirmUploadBtn');
        const cancelUploadBtn = document.getElementById('cancelUploadBtn');
        const photoFile = document.getElementById('photoFile');
        const photoList = document.getElementById('photoList');

        let currentAlbumId = 1; // 默认选中第一个相册

        // 显示新增相册模态框
        addAlbumBtn.addEventListener('click', function() {
            addAlbumModal.classList.remove('hidden');
        });

        // 保存新相册
        saveAlbumBtn.addEventListener('click', function() {
            const albumName = newAlbumNameInput.value.trim();
            if (albumName) {
                const newAlbumId = albumList.children.length + 1; // 简单生成ID
                const newAlbumItem = document.createElement('li');
                newAlbumItem.className = 'flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 album-item';
                newAlbumItem.dataset.albumId = newAlbumId;
                newAlbumItem.innerHTML = `
                    <span class="text-gray-800 dark:text-gray-200">${albumName}</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">0 张</span>
                `;
                albumList.appendChild(newAlbumItem);
                newAlbumNameInput.value = '';
                addAlbumModal.classList.add('hidden');
                // 模拟选中新相册
                selectAlbum(newAlbumId);
            } else {
                alert('相册名称不能为空喵！');
            }
        });

        // 取消新增相册
        cancelAlbumBtn.addEventListener('click', function() {
            addAlbumModal.classList.add('hidden');
            newAlbumNameInput.value = '';
        });

        // 显示上传照片模态框
        uploadPhotoBtn.addEventListener('click', function() {
            if (currentAlbumId) {
                uploadPhotoModal.classList.remove('hidden');
            } else {
                alert('请先选择一个相册喵！');
            }
        });

        // 确认上传照片
        confirmUploadBtn.addEventListener('click', function() {
            if (photoFile.files.length > 0) {
                const file = photoFile.files[0];
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newPhotoCard = document.createElement('div');
                    newPhotoCard.className = 'bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm overflow-hidden';
                    newPhotoCard.innerHTML = `
                        <img src="${e.target.result}" alt="${file.name}" class="w-full h-32 object-cover">
                        <div class="p-3">
                            <p class="text-sm font-medium text-gray-800 dark:text-gray-200 truncate">${file.name}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">${new Date().toISOString().slice(0, 10)}</p>
                        </div>
                    `;
                    photoList.appendChild(newPhotoCard);
                };
                reader.readAsDataURL(file);
                uploadPhotoModal.classList.add('hidden');
                photoFile.value = ''; // 清空文件选择
                // 模拟更新相册照片数量
                updateAlbumPhotoCount(currentAlbumId, 1);
            } else {
                alert('请选择要上传的照片喵！');
            }
        });

        // 取消上传照片
        cancelUploadBtn.addEventListener('click', function() {
            uploadPhotoModal.classList.add('hidden');
            photoFile.value = '';
        });

        // 模拟相册选择
        albumList.addEventListener('click', function(event) {
            const targetAlbum = event.target.closest('.album-item');
            if (targetAlbum) {
                const albumId = parseInt(targetAlbum.dataset.albumId);
                selectAlbum(albumId);
            }
        });

        function selectAlbum(albumId) {
            // 移除所有相册的选中样式
            document.querySelectorAll('.album-item').forEach(item => {
                item.classList.remove('bg-blue-100', 'dark:bg-blue-900');
            });

            // 添加选中样式到当前相册
            const selectedAlbum = document.querySelector(`.album-item[data-album-id="${albumId}"]`);
            if (selectedAlbum) {
                selectedAlbum.classList.add('bg-blue-100', 'dark:bg-blue-900');
                currentAlbumId = albumId;
                // 模拟加载该相册的照片
                refreshPhotoList(albumId);
            }
        }

        function refreshPhotoList(albumId) {
            // 实际应用中会根据 albumId 从后端获取照片列表
            // 这里只是清空并添加一些模拟照片
            photoList.innerHTML = '';
            if (albumId === 1) {
                photoList.innerHTML = `
                    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm overflow-hidden">
                        <img src="https://via.placeholder.com/150" alt="Photo 1" class="w-full h-32 object-cover">
                        <div class="p-3">
                            <p class="text-sm font-medium text-gray-800 dark:text-gray-200 truncate">我的照片 1.jpg</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">2023-01-01</p>
                        </div>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm overflow-hidden">
                        <img src="https://via.placeholder.com/150" alt="Photo 2" class="w-full h-32 object-cover">
                        <div class="p-3">
                            <p class="text-sm font-medium text-gray-800 dark:text-gray-200 truncate">我的照片 2.png</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">2023-01-02</p>
                        </div>
                    </div>
                `;
            } else if (albumId === 2) {
                photoList.innerHTML = `
                    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm overflow-hidden">
                        <img src="https://via.placeholder.com/150" alt="Photo 3" class="w-full h-32 object-cover">
                        <div class="p-3">
                            <p class="text-sm font-medium text-gray-800 dark:text-gray-200 truncate">旅行照片 1.jpg</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">2022-05-10</p>
                        </div>
                    </div>
                `;
            } else {
                photoList.innerHTML = '<p class="text-gray-500 dark:text-gray-400">该相册暂无照片喵。</p>';
            }
        }

        function updateAlbumPhotoCount(albumId, change) {
            const albumItem = document.querySelector(`.album-item[data-album-id="${albumId}"]`);
            if (albumItem) {
                const countSpan = albumItem.querySelector('span:last-child');
                let currentCount = parseInt(countSpan.textContent.split(' ')[0]);
                currentCount += change;
                countSpan.textContent = `${currentCount} 张`;
            }
        }

        // 初始加载时选中第一个相册
        if (albumList.children.length > 0) {
            selectAlbum(parseInt(albumList.children[0].dataset.albumId));
        }
    });
</script>