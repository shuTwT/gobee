# License Handler

授权管理模块的处理器层，负责处理HTTP请求和响应。

## 功能

- 创建授权
- 查询授权分页列表
- 查询单个授权详情
- 更新授权信息
- 删除授权
- 验证授权

## 接口

### 创建授权
- 路径: `POST /api/v1/license/create`
- 请求体:
  ```json
  {
    "machine_code": "机器码",
    "license_key": "授权密钥",
    "customer_name": "客户名称",
    "expire_date": "2025-12-31T23:59:59Z"
  }
  ```
- 响应: 创建成功的授权详情

### 查询授权分页列表
- 路径: `GET /api/v1/license/page`
- 参数:
  - page: 页码
  - size: 每页数量
- 响应: 分页的授权列表

### 查询单个授权
- 路径: `GET /api/v1/license/query/:id`
- 参数:
  - id: 授权ID
- 响应: 授权详情

### 更新授权
- 路径: `PUT /api/v1/license/update/:id`
- 参数:
  - id: 授权ID
- 请求体: 支持部分更新，所有字段都是可选的
- 响应: 更新后的授权详情

### 删除授权
- 路径: `DELETE /api/v1/license/delete/:id`
- 参数:
  - id: 授权ID
- 响应: 删除成功提示

### 验证授权
- 路径: `POST /api/v1/license/verify`
- 请求体:
  ```json
  {
    "machine_code": "机器码"
  }
  ```
- 响应: 授权验证结果

## 错误处理

所有接口都包含完善的错误处理和日志记录：

- 请求参数解析失败：返回 400 错误
- 数据库操作失败：返回 500 错误
- 所有错误都会记录详细的日志信息，包括错误上下文

## 日志记录

使用结构化日志记录关键操作：

- 创建授权：记录授权ID和机器码
- 更新授权：记录授权ID和机器码
- 删除授权：记录授权ID
- 验证授权：记录机器码和验证结果
- 查询失败：记录错误详情
- 操作失败：记录错误详情和上下文信息
